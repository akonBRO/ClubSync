{"ast":null,"code":"var _jsxFileName = \"E:\\\\ClubSync\\\\frontend\\\\src\\\\pages\\\\BudgetPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useParams } from 'react-router-dom';\n// Import desired icons (example using Font Awesome)\nimport { FaPlus, FaTrash, FaSave, FaInfoCircle, FaCheckCircle, FaExclamationTriangle, FaHourglassHalf, FaLock, FaTasks } from 'react-icons/fa';\nimport './BudgetPage.css'; // We will heavily modify this file\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BudgetPage = () => {\n  _s();\n  const {\n    eventId\n  } = useParams();\n  const [event, setEvent] = useState(null);\n  const [items, setItems] = useState([]);\n  const [status, setStatus] = useState('pending');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n\n  // --- useEffect hook (NO CHANGES) ---\n  useEffect(() => {\n    const fetchEventAndBudget = async () => {\n      setIsLoading(true);\n      setError('');\n      setSuccess('');\n      try {\n        const eventRes = await axios.get(`http://localhost:3001/api/events/booking/${eventId}`);\n        setEvent(eventRes.data.event);\n        try {\n          const budgetRes = await axios.get(`http://localhost:3001/api/budgets/by-booking/${eventId}`);\n          if (budgetRes.data.budget) {\n            setItems(budgetRes.data.budget.items || []);\n            setStatus(budgetRes.data.budget.status);\n          } else {\n            setItems([]);\n            setStatus('pending');\n          }\n        } catch (budgetErr) {\n          console.error('Error fetching budget details:', budgetErr);\n          if (!budgetErr.response || budgetErr.response.status !== 404) {\n            setError('Failed to load budget details. Please try refreshing.');\n          } else {\n            if (isLoading) {\n              setItems([]);\n              setStatus('pending');\n            } else {\n              console.log(\"Budget fetch returned 404 after initial load.\");\n              setError(\"Couldn't re-fetch budget details (Not Found).\");\n            }\n          }\n        }\n      } catch (err) {\n        console.error('Error fetching event details:', err);\n        setError('Failed to load event data.');\n        setEvent(null);\n        setItems([]);\n        setStatus('pending');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    if (eventId) {\n      fetchEventAndBudget();\n    } else {\n      setIsLoading(false);\n      setError(\"Event ID is missing.\");\n    }\n  }, [eventId, isLoading]); // Added isLoading to dependency array for the error handling logic inside catch\n\n  // --- Handlers (NO CHANGES) ---\n  const handleAddItem = () => {\n    setItems([...items, {\n      category: 'Food',\n      item_name: '',\n      quantity: 1,\n      unit_price: 0,\n      total_price: 0\n    }]);\n  };\n  const handleItemChange = (index, field, value) => {\n    const updatedItems = [...items];\n    let safeValue = value;\n    // Ensure numeric fields don't get invalid values temporarily\n    if (field === 'quantity' || field === 'unit_price') {\n      safeValue = Number(value) || 0; // Default to 0 if NaN\n      if (field === 'quantity' && safeValue < 1) safeValue = 1; // Enforce min 1 for quantity\n      if (field === 'unit_price' && safeValue < 0) safeValue = 0; // Enforce min 0 for price\n    }\n    updatedItems[index][field] = safeValue;\n\n    // Recalculate total_price immediately\n    const quantity = Number(updatedItems[index].quantity) || 0;\n    const unit_price = Number(updatedItems[index].unit_price) || 0;\n    updatedItems[index].total_price = quantity * unit_price;\n    setItems(updatedItems);\n  };\n  const handleRemoveItem = index => {\n    const updatedItems = items.filter((_, idx) => idx !== index);\n    setItems(updatedItems);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    for (let item of items) {\n      const quantity = Number(item.quantity);\n      const unit_price = Number(item.unit_price);\n      if (!item.category || !item.item_name || isNaN(quantity) || quantity <= 0 || isNaN(unit_price) || unit_price < 0) {\n        setError('Please fill out all item fields correctly (quantity > 0, unit price >= 0).');\n        return;\n      }\n    }\n    if (!(event !== null && event !== void 0 && event._id)) {\n      setError('Cannot submit budget: Event ID is missing.');\n      return;\n    }\n    // Add loading indicator for submission\n    setIsLoading(true);\n    try {\n      const res = await axios.post(`http://localhost:3001/api/budgets/${event._id}`, {\n        items\n      });\n      setSuccess('Budget submitted successfully.');\n      setItems(res.data.budget.items || []);\n      setStatus(res.data.budget.status);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Error submitting budget:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to submit budget.');\n    } finally {\n      setIsLoading(false); // Stop loading after submission attempt\n    }\n  };\n\n  // --- Calculations (NO CHANGES) ---\n  const totalBudget = items.reduce((sum, item) => sum + (Number(item.total_price) || 0), 0);\n\n  // --- Render Logic ---\n  if (isLoading && !event) {\n    // Show initial loading state\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: [/*#__PURE__*/_jsxDEV(FaHourglassHalf, {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 47\n      }, this), \" Loading Event & Budget...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Helper function for status badge\n  const renderStatusBadge = () => {\n    let icon = /*#__PURE__*/_jsxDEV(FaInfoCircle, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 16\n    }, this);\n    let text = status.charAt(0).toUpperCase() + status.slice(1); // Capitalize\n    let className = 'status-badge ';\n    switch (status) {\n      case 'pending':\n        icon = /*#__PURE__*/_jsxDEV(FaTasks, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 16\n        }, this);\n        className += 'pending';\n        text = 'Pending Input';\n        break;\n      case 'hold':\n        icon = /*#__PURE__*/_jsxDEV(FaHourglassHalf, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 16\n        }, this);\n        className += 'hold';\n        text = 'Submitted / In Review';\n        break;\n      case 'approved':\n        icon = /*#__PURE__*/_jsxDEV(FaCheckCircle, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 16\n        }, this);\n        className += 'approved';\n        text = 'Budget Accepted';\n        break;\n      case 'rejected':\n        icon = /*#__PURE__*/_jsxDEV(FaExclamationTriangle, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 16\n        }, this);\n        className += 'rejected';\n        text = 'Budget Rejected';\n        break;\n      default:\n        className += 'unknown';\n    }\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: className,\n      children: [icon, \" \", text]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"budget-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"budget-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Budget for: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"event-name\",\n          children: (event === null || event === void 0 ? void 0 : event.event_name) || '...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-section\",\n        children: [\"Status: \", renderStatusBadge()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-error\",\n      children: [/*#__PURE__*/_jsxDEV(FaExclamationTriangle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 52\n      }, this), \" \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-success\",\n      children: [/*#__PURE__*/_jsxDEV(FaCheckCircle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 56\n      }, this), \" \", success]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 19\n    }, this), isLoading && status !== 'pending' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: [/*#__PURE__*/_jsxDEV(FaHourglassHalf, {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 78\n      }, this), \" Processing...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 45\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"budget-content\",\n      children: status === 'pending' ?\n      /*#__PURE__*/\n      // --- Editable Form ---\n      _jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"budget-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-responsive\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"budget-table editable\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Item Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"col-quantity\",\n                  children: \"Quantity\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"col-price\",\n                  children: \"Unit Price (\\u09F3)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"col-price\",\n                  children: \"Total Price (\\u09F3)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"col-actions\",\n                  children: \"Actions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: [items.map((item, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  \"data-label\": \"Category\",\n                  children: /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: item.category,\n                    onChange: e => handleItemChange(idx, 'category', e.target.value),\n                    required: true,\n                    className: \"form-input form-select\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      disabled: true,\n                      children: \"Choose...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 220,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Food\",\n                      children: \"Food\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 221,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Logistic\",\n                      children: \"Logistic\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 222,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Transport\",\n                      children: \"Transport\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 223,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"Other\",\n                      children: \"Other\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 224,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 214,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  \"data-label\": \"Item Name\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: item.item_name,\n                    placeholder: \"e.g., Venue Rent\",\n                    onChange: e => handleItemChange(idx, 'item_name', e.target.value),\n                    required: true,\n                    className: \"form-input\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 228,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  \"data-label\": \"Quantity\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    value: item.quantity,\n                    onChange: e => handleItemChange(idx, 'quantity', e.target.value),\n                    min: \"1\",\n                    required: true,\n                    className: \"form-input\",\n                    step: \"any\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  \"data-label\": \"Unit Price ($)\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    value: item.unit_price,\n                    onChange: e => handleItemChange(idx, 'unit_price', e.target.value),\n                    min: \"0\",\n                    required: true,\n                    className: \"form-input\",\n                    step: \"0.01\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  \"data-label\": \"Total Price ($)\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"price-display\",\n                    children: (Number(item.quantity || 0) * Number(item.unit_price || 0)).toFixed(2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  \"data-label\": \"Actions\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => handleRemoveItem(idx),\n                    className: \"btn btn-danger btn-icon\",\n                    title: \"Remove Item\" // Tooltip for icon button\n                    ,\n                    children: /*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 271,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 265,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 23\n                }, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 21\n              }, this)), items.length === 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: /*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: \"6\",\n                  className: \"no-items-row\",\n                  children: \"No items added yet. Click \\\"Add Item\\\" to start.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"budget-form-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleAddItem,\n            className: \"btn btn-secondary btn-add-item\",\n            disabled: isLoading // Disable while submitting\n            ,\n            children: [/*#__PURE__*/_jsxDEV(FaPlus, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 21\n            }, this), \" Add Item\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"budget-summary\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Grand Total:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"total-amount\",\n              children: [\"$\", totalBudget.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary btn-submit\",\n            disabled: items.length === 0 || isLoading // Disable if no items or submitting\n            ,\n            children: [/*#__PURE__*/_jsxDEV(FaSave, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 21\n            }, this), \" Submit Budget\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }, this) :\n      /*#__PURE__*/\n      // --- Read-Only View ---\n      _jsxDEV(\"div\", {\n        className: \"budget-readonly\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"readonly-info\",\n          children: [/*#__PURE__*/_jsxDEV(FaLock, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 15\n          }, this), \" Budget has been submitted and is currently \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 69\n          }, this), \". Editing is disabled.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Submitted Items:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this), items.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-responsive\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"budget-table readonly\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 31\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 31\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"col-quantity\",\n                  children: \"Qty\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 31\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"col-price\",\n                  children: \"Unit Price (\\u09F3)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 31\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"col-price\",\n                  children: \"Total (\\u09F3)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 31\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 27\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: items.map((item, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  \"data-label\": \"Category\",\n                  children: item.category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  \"data-label\": \"Item\",\n                  children: item.item_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  \"data-label\": \"Qty\",\n                  children: item.quantity\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  \"data-label\": \"Unit Price ($)\",\n                  children: (Number(item.unit_price) || 0).toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 336,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  \"data-label\": \"Total ($)\",\n                  children: (Number(item.total_price) || 0).toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 35\n                }, this)]\n              }, `display-${idx}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 31\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: \"4\",\n                  className: \"total-label\",\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Grand Total:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 343,\n                    columnNumber: 71\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 31\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  \"data-label\": \"Grand Total ($)\",\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: [\"\\u09F3\", totalBudget.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 64\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 344,\n                  columnNumber: 31\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 27\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No items were submitted in this budget.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 178,\n    columnNumber: 5\n  }, this) // End budget-container\n  ;\n};\n_s(BudgetPage, \"qlJG0OJUVr/whQaBawUOlo6sCpg=\", false, function () {\n  return [useParams];\n});\n_c = BudgetPage;\nexport default BudgetPage;\nvar _c;\n$RefreshReg$(_c, \"BudgetPage\");","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","FaPlus","FaTrash","FaSave","FaInfoCircle","FaCheckCircle","FaExclamationTriangle","FaHourglassHalf","FaLock","FaTasks","jsxDEV","_jsxDEV","BudgetPage","_s","eventId","event","setEvent","items","setItems","status","setStatus","error","setError","success","setSuccess","isLoading","setIsLoading","fetchEventAndBudget","eventRes","get","data","budgetRes","budget","budgetErr","console","response","log","err","handleAddItem","category","item_name","quantity","unit_price","total_price","handleItemChange","index","field","value","updatedItems","safeValue","Number","handleRemoveItem","filter","_","idx","handleSubmit","e","preventDefault","item","isNaN","_id","res","post","_err$response","_err$response$data","message","totalBudget","reduce","sum","className","children","fileName","_jsxFileName","lineNumber","columnNumber","renderStatusBadge","icon","text","charAt","toUpperCase","slice","event_name","onSubmit","map","onChange","target","required","disabled","type","placeholder","min","step","toFixed","onClick","title","length","colSpan","_c","$RefreshReg$"],"sources":["E:/ClubSync/frontend/src/pages/BudgetPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams } from 'react-router-dom';\r\n// Import desired icons (example using Font Awesome)\r\nimport { FaPlus, FaTrash, FaSave, FaInfoCircle, FaCheckCircle, FaExclamationTriangle, FaHourglassHalf, FaLock, FaTasks } from 'react-icons/fa';\r\nimport './BudgetPage.css'; // We will heavily modify this file\r\n\r\nconst BudgetPage = () => {\r\n  const { eventId } = useParams();\r\n  const [event, setEvent] = useState(null);\r\n  const [items, setItems] = useState([]);\r\n  const [status, setStatus] = useState('pending');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // --- useEffect hook (NO CHANGES) ---\r\n  useEffect(() => {\r\n    const fetchEventAndBudget = async () => {\r\n      setIsLoading(true);\r\n      setError('');\r\n      setSuccess('');\r\n      try {\r\n        const eventRes = await axios.get(`http://localhost:3001/api/events/booking/${eventId}`);\r\n        setEvent(eventRes.data.event);\r\n        try {\r\n          const budgetRes = await axios.get(`http://localhost:3001/api/budgets/by-booking/${eventId}`);\r\n          if (budgetRes.data.budget) {\r\n            setItems(budgetRes.data.budget.items || []);\r\n            setStatus(budgetRes.data.budget.status);\r\n          } else {\r\n            setItems([]);\r\n            setStatus('pending');\r\n          }\r\n        } catch (budgetErr) {\r\n          console.error('Error fetching budget details:', budgetErr);\r\n          if (!budgetErr.response || budgetErr.response.status !== 404) {\r\n            setError('Failed to load budget details. Please try refreshing.');\r\n          } else {\r\n            if (isLoading) {\r\n              setItems([]);\r\n              setStatus('pending');\r\n            } else {\r\n              console.log(\"Budget fetch returned 404 after initial load.\");\r\n              setError(\"Couldn't re-fetch budget details (Not Found).\");\r\n            }\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error('Error fetching event details:', err);\r\n        setError('Failed to load event data.');\r\n        setEvent(null);\r\n        setItems([]);\r\n        setStatus('pending');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    if (eventId) {\r\n      fetchEventAndBudget();\r\n    } else {\r\n      setIsLoading(false);\r\n      setError(\"Event ID is missing.\");\r\n    }\r\n  }, [eventId, isLoading]); // Added isLoading to dependency array for the error handling logic inside catch\r\n\r\n  // --- Handlers (NO CHANGES) ---\r\n  const handleAddItem = () => {\r\n    setItems([\r\n      ...items,\r\n      { category: 'Food', item_name: '', quantity: 1, unit_price: 0, total_price: 0 },\r\n    ]);\r\n  };\r\n\r\n  const handleItemChange = (index, field, value) => {\r\n    const updatedItems = [...items];\r\n    let safeValue = value;\r\n    // Ensure numeric fields don't get invalid values temporarily\r\n    if (field === 'quantity' || field === 'unit_price') {\r\n        safeValue = Number(value) || 0; // Default to 0 if NaN\r\n        if (field === 'quantity' && safeValue < 1) safeValue = 1; // Enforce min 1 for quantity\r\n        if (field === 'unit_price' && safeValue < 0) safeValue = 0; // Enforce min 0 for price\r\n    }\r\n    updatedItems[index][field] = safeValue;\r\n\r\n    // Recalculate total_price immediately\r\n    const quantity = Number(updatedItems[index].quantity) || 0;\r\n    const unit_price = Number(updatedItems[index].unit_price) || 0;\r\n    updatedItems[index].total_price = quantity * unit_price;\r\n\r\n    setItems(updatedItems);\r\n  };\r\n\r\n\r\n  const handleRemoveItem = (index) => {\r\n    const updatedItems = items.filter((_, idx) => idx !== index);\r\n    setItems(updatedItems);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess('');\r\n    for (let item of items) {\r\n      const quantity = Number(item.quantity);\r\n      const unit_price = Number(item.unit_price);\r\n      if (!item.category || !item.item_name || isNaN(quantity) || quantity <= 0 || isNaN(unit_price) || unit_price < 0) {\r\n        setError('Please fill out all item fields correctly (quantity > 0, unit price >= 0).');\r\n        return;\r\n      }\r\n    }\r\n    if (!event?._id) {\r\n      setError('Cannot submit budget: Event ID is missing.');\r\n      return;\r\n    }\r\n    // Add loading indicator for submission\r\n    setIsLoading(true);\r\n    try {\r\n      const res = await axios.post(`http://localhost:3001/api/budgets/${event._id}`, { items });\r\n      setSuccess('Budget submitted successfully.');\r\n      setItems(res.data.budget.items || []);\r\n      setStatus(res.data.budget.status);\r\n    } catch (err) {\r\n      console.error('Error submitting budget:', err);\r\n      setError(err.response?.data?.message || 'Failed to submit budget.');\r\n    } finally {\r\n        setIsLoading(false); // Stop loading after submission attempt\r\n    }\r\n  };\r\n\r\n  // --- Calculations (NO CHANGES) ---\r\n  const totalBudget = items.reduce((sum, item) => sum + (Number(item.total_price) || 0), 0);\r\n\r\n  // --- Render Logic ---\r\n  if (isLoading && !event) { // Show initial loading state\r\n    return <div className=\"loading-container\"><FaHourglassHalf className=\"spinner\" /> Loading Event & Budget...</div>;\r\n  }\r\n\r\n  // Helper function for status badge\r\n  const renderStatusBadge = () => {\r\n    let icon = <FaInfoCircle />;\r\n    let text = status.charAt(0).toUpperCase() + status.slice(1); // Capitalize\r\n    let className = 'status-badge ';\r\n\r\n    switch (status) {\r\n      case 'pending':\r\n        icon = <FaTasks />;\r\n        className += 'pending';\r\n        text = 'Pending Input';\r\n        break;\r\n      case 'hold':\r\n        icon = <FaHourglassHalf />;\r\n        className += 'hold';\r\n        text = 'Submitted / In Review';\r\n        break;\r\n      case 'approved':\r\n        icon = <FaCheckCircle />;\r\n        className += 'approved';\r\n        text = 'Budget Accepted';\r\n        break;\r\n      case 'rejected':\r\n        icon = <FaExclamationTriangle />;\r\n        className += 'rejected';\r\n        text = 'Budget Rejected';\r\n        break;\r\n      default:\r\n        className += 'unknown';\r\n    }\r\n\r\n    return (\r\n      <span className={className}>\r\n        {icon} {text}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"budget-container\">\r\n      <header className=\"budget-header\">\r\n        <h1>Budget for: <span className=\"event-name\">{event?.event_name || '...'}</span></h1>\r\n        <div className=\"status-section\">\r\n          Status: {renderStatusBadge()}\r\n        </div>\r\n      </header>\r\n\r\n      {/* Alerts Area */}\r\n      {error && <div className=\"alert alert-error\"><FaExclamationTriangle /> {error}</div>}\r\n      {success && <div className=\"alert alert-success\"><FaCheckCircle /> {success}</div>}\r\n\r\n      {/* Loading overlay during submit */}\r\n      {isLoading && status !== 'pending' && <div className=\"loading-overlay\"><FaHourglassHalf className=\"spinner\" /> Processing...</div>}\r\n\r\n      {/* Main Content Area */}\r\n      <div className=\"budget-content\">\r\n        {status === 'pending' ? (\r\n          // --- Editable Form ---\r\n          <form onSubmit={handleSubmit} className=\"budget-form\">\r\n            <div className=\"table-responsive\">\r\n              <table className=\"budget-table editable\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Category</th>\r\n                    <th>Item Name</th>\r\n                    <th className=\"col-quantity\">Quantity</th>\r\n                    <th className=\"col-price\">Unit Price (৳)</th>\r\n                    <th className=\"col-price\">Total Price (৳)</th>\r\n                    <th className=\"col-actions\">Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {items.map((item, idx) => (\r\n                    <tr key={idx}>\r\n                      <td data-label=\"Category\">\r\n                        <select\r\n                          value={item.category}\r\n                          onChange={(e) => handleItemChange(idx, 'category', e.target.value)}\r\n                          required\r\n                          className=\"form-input form-select\"\r\n                        >\r\n                          <option value=\"\" disabled>Choose...</option>\r\n                          <option value=\"Food\">Food</option>\r\n                          <option value=\"Logistic\">Logistic</option>\r\n                          <option value=\"Transport\">Transport</option>\r\n                          <option value=\"Other\">Other</option>\r\n                        </select>\r\n                      </td>\r\n                      <td data-label=\"Item Name\">\r\n                        <input\r\n                          type=\"text\"\r\n                          value={item.item_name}\r\n                          placeholder=\"e.g., Venue Rent\"\r\n                          onChange={(e) => handleItemChange(idx, 'item_name', e.target.value)}\r\n                          required\r\n                          className=\"form-input\"\r\n                        />\r\n                      </td>\r\n                      <td data-label=\"Quantity\">\r\n                        <input\r\n                          type=\"number\"\r\n                          value={item.quantity}\r\n                          onChange={(e) => handleItemChange(idx, 'quantity', e.target.value)}\r\n                          min=\"1\"\r\n                          required\r\n                          className=\"form-input\"\r\n                          step=\"any\"\r\n                        />\r\n                      </td>\r\n                      <td data-label=\"Unit Price ($)\">\r\n                        <input\r\n                          type=\"number\"\r\n                          value={item.unit_price}\r\n                          onChange={(e) => handleItemChange(idx, 'unit_price', e.target.value)}\r\n                          min=\"0\"\r\n                          required\r\n                          className=\"form-input\"\r\n                          step=\"0.01\"\r\n                        />\r\n                      </td>\r\n                      <td data-label=\"Total Price ($)\">\r\n                        <span className=\"price-display\">\r\n                          {(Number(item.quantity || 0) * Number(item.unit_price || 0)).toFixed(2)}\r\n                        </span>\r\n                      </td>\r\n                      <td data-label=\"Actions\">\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => handleRemoveItem(idx)}\r\n                          className=\"btn btn-danger btn-icon\"\r\n                          title=\"Remove Item\" // Tooltip for icon button\r\n                        >\r\n                          <FaTrash />\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                   {/* Show message if no items */}\r\n                   {items.length === 0 && (\r\n                      <tr>\r\n                          <td colSpan=\"6\" className=\"no-items-row\">\r\n                              No items added yet. Click \"Add Item\" to start.\r\n                          </td>\r\n                      </tr>\r\n                   )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n\r\n            {/* Form Actions & Summary */}\r\n            <div className=\"budget-form-footer\">\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={handleAddItem}\r\n                    className=\"btn btn-secondary btn-add-item\"\r\n                    disabled={isLoading} // Disable while submitting\r\n                >\r\n                    <FaPlus /> Add Item\r\n                </button>\r\n                <div className=\"budget-summary\">\r\n                    <h3>Grand Total:</h3>\r\n                    <span className=\"total-amount\">${totalBudget.toFixed(2)}</span>\r\n                </div>\r\n                <button\r\n                    type=\"submit\"\r\n                    className=\"btn btn-primary btn-submit\"\r\n                    disabled={items.length === 0 || isLoading} // Disable if no items or submitting\r\n                >\r\n                    <FaSave /> Submit Budget\r\n                </button>\r\n            </div>\r\n          </form>\r\n        ) : (\r\n          // --- Read-Only View ---\r\n          <div className=\"budget-readonly\">\r\n            <p className=\"readonly-info\">\r\n              <FaLock /> Budget has been submitted and is currently <strong>{status}</strong>. Editing is disabled.\r\n            </p>\r\n            <h4>Submitted Items:</h4>\r\n            {items.length > 0 ? (\r\n              <div className=\"table-responsive\">\r\n                  <table className=\"budget-table readonly\">\r\n                      <thead>\r\n                          <tr>\r\n                              <th>Category</th>\r\n                              <th>Item</th>\r\n                              <th className=\"col-quantity\">Qty</th>\r\n                              <th className=\"col-price\">Unit Price (৳)</th>\r\n                              <th className=\"col-price\">Total (৳)</th>\r\n                          </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                          {items.map((item, idx) => (\r\n                              <tr key={`display-${idx}`}>\r\n                                  <td data-label=\"Category\">{item.category}</td>\r\n                                  <td data-label=\"Item\">{item.item_name}</td>\r\n                                  <td data-label=\"Qty\">{item.quantity}</td>\r\n                                  <td data-label=\"Unit Price ($)\">{(Number(item.unit_price) || 0).toFixed(2)}</td>\r\n                                  <td data-label=\"Total ($)\">{(Number(item.total_price) || 0).toFixed(2)}</td>\r\n                              </tr>\r\n                          ))}\r\n                      </tbody>\r\n                      <tfoot>\r\n                          <tr>\r\n                              <td colSpan=\"4\" className=\"total-label\"><strong>Grand Total:</strong></td>\r\n                              <td data-label=\"Grand Total ($)\"><strong>৳{totalBudget.toFixed(2)}</strong></td>\r\n                          </tr>\r\n                      </tfoot>\r\n                  </table>\r\n              </div>\r\n            ) : (\r\n              <p>No items were submitted in this budget.</p>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div> {/* End budget-content */}\r\n    </div> // End budget-container\r\n  );\r\n};\r\n\r\nexport default BudgetPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}