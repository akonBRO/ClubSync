{"ast":null,"code":"var _jsxFileName = \"E:\\\\ClubSync\\\\frontend\\\\src\\\\students\\\\UpcomingEvents.jsx\",\n  _s = $RefreshSig$();\n// frontend/src/students/UpcomingEvents.js\nimport React, { useState, useEffect, useContext /* or useSelector if using Redux */ } from 'react';\nimport axios from 'axios';\nimport styles from './UpcomingEvents.module.css';\nimport { FaCalendarAlt, FaClock, FaMapMarkerAlt, FaUniversity, FaInfoCircle, FaSearch, FaFilter, FaUserCheck, FaExclamationCircle, FaEye, FaTimes } from 'react-icons/fa'; // Added FaEye and FaTimes\nimport { BeatLoader } from 'react-spinners';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction UpcomingEvents() {\n  _s();\n  const [events, setEvents] = useState([]);\n  const [filteredEvents, setFilteredEvents] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedClub, setSelectedClub] = useState('');\n  const [allClubs, setAllClubs] = useState([]);\n  const [registrationStatus, setRegistrationStatus] = useState({});\n\n  // --- State for Registered Events Modal ---\n  const [showRegisteredEvents, setShowRegisteredEvents] = useState(false);\n  const [registeredEvents, setRegisteredEvents] = useState([]);\n  const [loadingRegistered, setLoadingRegistered] = useState(false);\n  const [registeredError, setRegisteredError] = useState(null);\n  // --- End State for Registered Events Modal ---\n\n  // --- Get Logged-in Student Info ---\n  const getStudentIdentifierFromStorage = () => {\n    try {\n      const storedId = localStorage.getItem('studentId'); // Looking for 'studentId'\n\n      if (storedId) {\n        const idAsNumber = parseInt(storedId, 10);\n        if (!isNaN(idAsNumber)) {\n          console.log(\"Parsed numeric student ID from storage:\", idAsNumber);\n          return idAsNumber;\n        } else {\n          console.log(\"Stored student ID is not a number, returning null. Ensure your login component stores the numeric UID under 'studentUid'.\", storedId);\n          return null;\n        }\n      }\n    } catch (e) {\n      console.error(\"Error reading student info from localStorage\", e);\n    }\n    return null;\n  };\n  const loggedInStudentIdentifier = getStudentIdentifierFromStorage();\n\n  // --- Check Authentication on Mount (Optional but Recommended) ---\n  useEffect(() => {\n    if (!loggedInStudentIdentifier) {\n      console.warn(\"UpcomingEvents: No logged-in student identifier found from storage. Registration might fail.\");\n    } else {\n      console.log(\"UpcomingEvents: Logged-in student identifier found from storage:\", loggedInStudentIdentifier);\n    }\n  }, [loggedInStudentIdentifier]);\n\n  // --- Fetch Approved Events ---\n  useEffect(() => {\n    setLoading(true);\n    setError(null);\n    axios.get('http://localhost:3001/api/student/events/upcoming', {\n      withCredentials: true\n    }).then(response => {\n      const sortedEvents = response.data.sort((a, b) => new Date(a.event_date) - new Date(b.event_date));\n      setEvents(sortedEvents);\n      setFilteredEvents(sortedEvents);\n      const clubs = [...new Set(sortedEvents.map(event => event.club_name))];\n      setAllClubs(clubs.sort());\n    }).catch(err => {\n      console.error(\"Error fetching upcoming events:\", err);\n      if (err.response) {\n        console.error(\"Error data:\", err.response.data);\n        console.error(\"Error status:\", err.response.status);\n        if (err.response.status === 401) {\n          setError(\"You must be logged in to view upcoming events.\");\n          console.log(\"Received 401, potentially session expired or invalid cookie.\");\n        } else {\n          setError(err.response.data.message || `Error: ${err.response.status}`);\n        }\n      } else if (err.request) {\n        console.error(\"Error request:\", err.request);\n        setError(\"Could not connect to server. Is it running on port 3001?\");\n      } else {\n        console.error('Error message:', err.message);\n        setError(`An error occurred: ${err.message}`);\n      }\n    }).finally(() => {\n      setLoading(false);\n    });\n  }, []);\n\n  // --- Filter Events based on Search and Club Selection ---\n  useEffect(() => {\n    let currentEvents = [...events];\n    if (searchTerm.trim()) {\n      currentEvents = currentEvents.filter(event => event.eid.toLowerCase().includes(searchTerm.toLowerCase()));\n    }\n    if (selectedClub) {\n      currentEvents = currentEvents.filter(event => event.club_name === selectedClub);\n    }\n    setFilteredEvents(currentEvents);\n  }, [searchTerm, selectedClub, events]);\n\n  // --- Handle Event Registration ---\n  const handleRegister = (eventId, eventName) => {\n    if (!loggedInStudentIdentifier) {\n      alert('Could not identify student. Please ensure you are logged in.');\n      return;\n    }\n    const confirmation = window.confirm(`Are you sure you want to register for \"${eventName}\"?`);\n    if (confirmation) {\n      setRegistrationStatus(prev => ({\n        ...prev,\n        [eventId]: {\n          loading: true\n        }\n      }));\n      axios.post(`http://localhost:3001/api/student/events/register/${eventId}`, {}, {\n        withCredentials: true\n      }).then(response => {\n        console.log('Registration successful/status:', response.data);\n        const message = response.data.message || 'Registration successful!';\n        const isAlreadyRegistered = response.data.alreadyRegistered || false;\n        setRegistrationStatus(prev => ({\n          ...prev,\n          [eventId]: {\n            success: true,\n            message: message\n          }\n        }));\n        if (!isAlreadyRegistered) {\n          setEvents(prevEvents => prevEvents.map(event => {\n            if (event._id === eventId) {\n              const currentRegStd = Array.isArray(event.reg_std) ? event.reg_std : [];\n              const updatedRegStd = currentRegStd.includes(loggedInStudentIdentifier) ? currentRegStd : [...currentRegStd, loggedInStudentIdentifier];\n              return {\n                ...event,\n                reg_std: updatedRegStd\n              };\n            }\n            return event;\n          }));\n          // If registration was successful, update the registeredEvents list if the modal is open\n          if (showRegisteredEvents) {\n            // A simple approach is to refetch the registered events\n            // A more complex approach would be to add the event to the registeredEvents state\n            fetchRegisteredEvents();\n          }\n        }\n        setTimeout(() => {\n          setRegistrationStatus(prev => ({\n            ...prev,\n            [eventId]: undefined\n          }));\n        }, 5000);\n      }).catch(err => {\n        var _err$response;\n        console.error(\"Error registering for event:\", err);\n        let errorMessage = 'Registration failed. Please try again.';\n        if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) {\n          errorMessage = \"Authentication failed during registration. Please log in again.\";\n        } else {\n          var _err$response2, _err$response2$data;\n          errorMessage = ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || errorMessage;\n        }\n        setRegistrationStatus(prev => ({\n          ...prev,\n          [eventId]: {\n            error: true,\n            message: errorMessage\n          }\n        }));\n        setTimeout(() => {\n          setRegistrationStatus(prev => ({\n            ...prev,\n            [eventId]: undefined\n          }));\n        }, 7000);\n      });\n    }\n  };\n\n  // --- Fetch Registered Events ---\n  const fetchRegisteredEvents = async () => {\n    if (!loggedInStudentIdentifier) {\n      setRegisteredError(\"You must be logged in to view registered events.\");\n      return;\n    }\n    setLoadingRegistered(true);\n    setRegisteredError(null);\n    try {\n      const response = await axios.get('http://localhost:3001/api/student/events/registered', {\n        withCredentials: true\n      });\n      setRegisteredEvents(response.data);\n      console.log(\"Fetched registered events:\", response.data);\n    } catch (err) {\n      var _err$response3;\n      console.error(\"Error fetching registered events:\", err);\n      let errorMessage = 'Failed to fetch registered events.';\n      if (((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.status) === 401) {\n        errorMessage = \"Authentication failed. Please log in again to view registered events.\";\n      } else {\n        var _err$response4, _err$response4$data;\n        errorMessage = ((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || errorMessage;\n      }\n      setRegisteredError(errorMessage);\n    } finally {\n      setLoadingRegistered(false);\n    }\n  };\n\n  // --- Handle View Registered Button Click ---\n  const handleViewRegisteredClick = () => {\n    // Only fetch if the modal is closed and we are about to open it\n    if (!showRegisteredEvents) {\n      fetchRegisteredEvents();\n    }\n    setShowRegisteredEvents(true); // Toggle modal visibility\n  };\n\n  // --- Helper formatDateTime (remains the same) ---\n  const formatDateTime = (dateString, timeSlots) => {\n    const date = new Date(dateString);\n    const formattedDate = date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      weekday: 'long'\n    });\n    const formattedTime = (timeSlots === null || timeSlots === void 0 ? void 0 : timeSlots.join(' / ')) || 'Time TBD';\n    return `${formattedDate} at ${formattedTime}`;\n  };\n\n  // --- JSX Rendering ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.upcomingEventsContainer,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [/*#__PURE__*/_jsxDEV(FaCalendarAlt, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }, this), \" Upcoming Approved Events\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.controls,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.searchInputContainer,\n        children: [/*#__PURE__*/_jsxDEV(FaSearch, {\n          className: styles.searchIcon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Search by Event ID...\",\n          value: searchTerm,\n          onChange: e => setSearchTerm(e.target.value),\n          className: styles.searchInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.filterDropdownContainer,\n        children: [/*#__PURE__*/_jsxDEV(FaFilter, {\n          className: styles.filterIcon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedClub,\n          onChange: e => setSelectedClub(e.target.value),\n          className: styles.filterDropdown,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"All Clubs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 25\n          }, this), allClubs.map(club => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: club,\n            children: club\n          }, club, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 17\n      }, this), loggedInStudentIdentifier &&\n      /*#__PURE__*/\n      // Only show button if logged in\n      _jsxDEV(\"button\", {\n        className: styles.viewRegisteredButton,\n        onClick: handleViewRegisteredClick,\n        disabled: loadingRegistered // Disable while fetching\n        ,\n        children: loadingRegistered ? /*#__PURE__*/_jsxDEV(BeatLoader, {\n          size: 8,\n          color: \"#fff\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 46\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(FaEye, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 87\n          }, this), \" View Registered Events\"]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.centeredMessage,\n      children: [/*#__PURE__*/_jsxDEV(BeatLoader, {\n        color: \"#4A90E2\",\n        loading: loading,\n        size: 15\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 65\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading events...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 123\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 25\n    }, this), error && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${styles.centeredMessage} ${styles.errorMessage}`,\n      children: [/*#__PURE__*/_jsxDEV(FaExclamationCircle, {\n        size: 24\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 103\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 136\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 35\n    }, this), !loading && !error && filteredEvents.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.centeredMessage,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: events.length === 0 ? \"No upcoming events found.\" : \"No events match your current search/filter.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 22\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 18\n    }, this), !loading && !error && filteredEvents.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.eventsGrid,\n      children: filteredEvents.map(event => {\n        var _event$event_details, _event$event_details2;\n        const isRegistered = loggedInStudentIdentifier && Array.isArray(event.reg_std) && event.reg_std.includes(loggedInStudentIdentifier);\n        const regInfo = registrationStatus[event._id];\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.eventCard,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: event.event_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.eventMeta,\n            children: [/*#__PURE__*/_jsxDEV(FaUniversity, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 65\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Club:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 82\n            }, this), \" \", event.club_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.eventMeta,\n            children: [/*#__PURE__*/_jsxDEV(FaCalendarAlt, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 65\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Date & Time:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 83\n            }, this), \" \", formatDateTime(event.event_date, event.time_slots)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.eventMeta,\n            children: [/*#__PURE__*/_jsxDEV(FaMapMarkerAlt, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 65\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Location:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 84\n            }, this), \" Room \", event.room_number]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.eventMeta,\n            children: [/*#__PURE__*/_jsxDEV(FaInfoCircle, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 65\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"EID:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 82\n            }, this), \" \", event.eid]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.eventDetails,\n            children: [(_event$event_details = event.event_details) === null || _event$event_details === void 0 ? void 0 : _event$event_details.substring(0, 100), ((_event$event_details2 = event.event_details) === null || _event$event_details2 === void 0 ? void 0 : _event$event_details2.length) > 100 ? '...' : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 33\n          }, this), event.std_reg === 'Yes' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.registrationArea,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `${styles.registerButton} ${isRegistered ? styles.registered : ''} ${regInfo !== null && regInfo !== void 0 && regInfo.loading ? styles.loading : ''}`,\n              onClick: () => !isRegistered && !(regInfo !== null && regInfo !== void 0 && regInfo.loading) && loggedInStudentIdentifier && handleRegister(event._id, event.event_name),\n              disabled: isRegistered || (regInfo === null || regInfo === void 0 ? void 0 : regInfo.loading) || !loggedInStudentIdentifier,\n              title: !loggedInStudentIdentifier ? \"Please log in to register\" : isRegistered ? \"You are already registered\" : `Register for ${event.event_name}`,\n              children: regInfo !== null && regInfo !== void 0 && regInfo.loading ? /*#__PURE__*/_jsxDEV(BeatLoader, {\n                size: 8,\n                color: \"#fff\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 65\n              }, this) : isRegistered ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [\" \", /*#__PURE__*/_jsxDEV(FaUserCheck, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 123\n                }, this), \" Registered \"]\n              }, void 0, true) : 'Register Now'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 41\n            }, this), (regInfo === null || regInfo === void 0 ? void 0 : regInfo.success) && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.regSuccess,\n              children: regInfo.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 62\n            }, this), (regInfo === null || regInfo === void 0 ? void 0 : regInfo.error) && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.regError,\n              children: regInfo.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 60\n            }, this), !loggedInStudentIdentifier && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.regMessage,\n              children: \"Log in to register.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 72\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 37\n          }, this), event.std_reg !== 'Yes' && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.noRegistration,\n            children: \"Registration not available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 37\n          }, this)]\n        }, event._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 29\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 17\n    }, this), showRegisteredEvents && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.modalOverlay,\n      onClick: () => setShowRegisteredEvents(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.modalContent,\n        onClick: e => e.stopPropagation(),\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.modalCloseButton,\n          onClick: () => setShowRegisteredEvents(false),\n          children: /*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [/*#__PURE__*/_jsxDEV(FaCalendarAlt, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 25\n          }, this), \" Your Registered Events\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 21\n        }, this), loadingRegistered && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.centeredMessage,\n          children: [/*#__PURE__*/_jsxDEV(BeatLoader, {\n            color: \"#4A90E2\",\n            size: 15\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 83\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Loading registered events...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 123\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 43\n        }, this), registeredError && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${styles.centeredMessage} ${styles.errorMessage}`,\n          children: [/*#__PURE__*/_jsxDEV(FaExclamationCircle, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 109\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: registeredError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 142\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 41\n        }, this), !loadingRegistered && !registeredError && registeredEvents.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.centeredMessage,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"You are not registered for any upcoming events.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 65\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 25\n        }, this), !loadingRegistered && !registeredError && registeredEvents.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: styles.registeredEventsList,\n          children: registeredEvents.map(event => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: styles.registeredEventItem,\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: event.event_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(FaUniversity, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 40\n              }, this), \" \", event.club_name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(FaCalendarAlt, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 40\n              }, this), \" \", formatDateTime(event.event_date, event.time_slots)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(FaMapMarkerAlt, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 40\n              }, this), \" Room \", event.room_number]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 37\n            }, this)]\n          }, event._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 224,\n    columnNumber: 5\n  }, this);\n}\n_s(UpcomingEvents, \"IC5HOirUMBpGoN3xI2BHKTZzwGc=\");\n_c = UpcomingEvents;\nexport default UpcomingEvents;\nvar _c;\n$RefreshReg$(_c, \"UpcomingEvents\");","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","styles","FaCalendarAlt","FaClock","FaMapMarkerAlt","FaUniversity","FaInfoCircle","FaSearch","FaFilter","FaUserCheck","FaExclamationCircle","FaEye","FaTimes","BeatLoader","jsxDEV","_jsxDEV","Fragment","_Fragment","UpcomingEvents","_s","events","setEvents","filteredEvents","setFilteredEvents","loading","setLoading","error","setError","searchTerm","setSearchTerm","selectedClub","setSelectedClub","allClubs","setAllClubs","registrationStatus","setRegistrationStatus","showRegisteredEvents","setShowRegisteredEvents","registeredEvents","setRegisteredEvents","loadingRegistered","setLoadingRegistered","registeredError","setRegisteredError","getStudentIdentifierFromStorage","storedId","localStorage","getItem","idAsNumber","parseInt","isNaN","console","log","e","loggedInStudentIdentifier","warn","get","withCredentials","then","response","sortedEvents","data","sort","a","b","Date","event_date","clubs","Set","map","event","club_name","catch","err","status","message","request","finally","currentEvents","trim","filter","eid","toLowerCase","includes","handleRegister","eventId","eventName","alert","confirmation","window","confirm","prev","post","isAlreadyRegistered","alreadyRegistered","success","prevEvents","_id","currentRegStd","Array","isArray","reg_std","updatedRegStd","fetchRegisteredEvents","setTimeout","undefined","_err$response","errorMessage","_err$response2","_err$response2$data","_err$response3","_err$response4","_err$response4$data","handleViewRegisteredClick","formatDateTime","dateString","timeSlots","date","formattedDate","toLocaleDateString","year","month","day","weekday","formattedTime","join","className","upcomingEventsContainer","children","fileName","_jsxFileName","lineNumber","columnNumber","controls","searchInputContainer","searchIcon","type","placeholder","value","onChange","target","searchInput","filterDropdownContainer","filterIcon","filterDropdown","club","viewRegisteredButton","onClick","disabled","size","color","centeredMessage","length","eventsGrid","_event$event_details","_event$event_details2","isRegistered","regInfo","eventCard","event_name","eventMeta","time_slots","room_number","eventDetails","event_details","substring","std_reg","registrationArea","registerButton","registered","title","regSuccess","regError","regMessage","noRegistration","modalOverlay","modalContent","stopPropagation","modalCloseButton","registeredEventsList","registeredEventItem","_c","$RefreshReg$"],"sources":["E:/ClubSync/frontend/src/students/UpcomingEvents.jsx"],"sourcesContent":["// frontend/src/students/UpcomingEvents.js\r\nimport React, { useState, useEffect, useContext /* or useSelector if using Redux */ } from 'react';\r\nimport axios from 'axios';\r\nimport styles from './UpcomingEvents.module.css';\r\nimport { FaCalendarAlt, FaClock, FaMapMarkerAlt, FaUniversity, FaInfoCircle, FaSearch, FaFilter, FaUserCheck, FaExclamationCircle, FaEye, FaTimes } from 'react-icons/fa'; // Added FaEye and FaTimes\r\nimport { BeatLoader } from 'react-spinners';\r\n\r\nfunction UpcomingEvents() {\r\nconst [events, setEvents] = useState([]);\r\nconst [filteredEvents, setFilteredEvents] = useState([]);\r\nconst [loading, setLoading] = useState(true);\r\nconst [error, setError] = useState(null);\r\nconst [searchTerm, setSearchTerm] = useState('');\r\nconst [selectedClub, setSelectedClub] = useState('');\r\nconst [allClubs, setAllClubs] = useState([]);\r\nconst [registrationStatus, setRegistrationStatus] = useState({});\r\n\r\n// --- State for Registered Events Modal ---\r\nconst [showRegisteredEvents, setShowRegisteredEvents] = useState(false);\r\nconst [registeredEvents, setRegisteredEvents] = useState([]);\r\nconst [loadingRegistered, setLoadingRegistered] = useState(false);\r\nconst [registeredError, setRegisteredError] = useState(null);\r\n// --- End State for Registered Events Modal ---\r\n\r\n\r\n// --- Get Logged-in Student Info ---\r\nconst getStudentIdentifierFromStorage = () => {\r\n    try {\r\n       const storedId = localStorage.getItem('studentId'); // Looking for 'studentId'\r\n\r\n       if (storedId) {\r\n           const idAsNumber = parseInt(storedId, 10);\r\n           if (!isNaN(idAsNumber)) {\r\n               console.log(\"Parsed numeric student ID from storage:\", idAsNumber);\r\n               return idAsNumber;\r\n           } else {\r\n               console.log(\"Stored student ID is not a number, returning null. Ensure your login component stores the numeric UID under 'studentUid'.\", storedId);\r\n               return null;\r\n           }\r\n       }\r\n    } catch (e) {\r\n        console.error(\"Error reading student info from localStorage\", e);\r\n    }\r\n    return null;\r\n};\r\n\r\nconst loggedInStudentIdentifier = getStudentIdentifierFromStorage();\r\n\r\n// --- Check Authentication on Mount (Optional but Recommended) ---\r\nuseEffect(() => {\r\n    if (!loggedInStudentIdentifier) {\r\n            console.warn(\"UpcomingEvents: No logged-in student identifier found from storage. Registration might fail.\");\r\n    } else {\r\n        console.log(\"UpcomingEvents: Logged-in student identifier found from storage:\", loggedInStudentIdentifier);\r\n    }\r\n}, [loggedInStudentIdentifier]);\r\n\r\n// --- Fetch Approved Events ---\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        setError(null);\r\n        axios.get('http://localhost:3001/api/student/events/upcoming', { withCredentials: true })\r\n            .then(response => {\r\n                const sortedEvents = response.data.sort((a, b) => new Date(a.event_date) - new Date(b.event_date));\r\n                setEvents(sortedEvents);\r\n                setFilteredEvents(sortedEvents);\r\n                const clubs = [...new Set(sortedEvents.map(event => event.club_name))];\r\n                setAllClubs(clubs.sort());\r\n            })\r\n            .catch(err => {\r\n                console.error(\"Error fetching upcoming events:\", err);\r\n               if (err.response) {\r\n                    console.error(\"Error data:\", err.response.data);\r\n                    console.error(\"Error status:\", err.response.status);\r\n                    if (err.response.status === 401) {\r\n                        setError(\"You must be logged in to view upcoming events.\");\r\n                         console.log(\"Received 401, potentially session expired or invalid cookie.\");\r\n                    } else {\r\n                        setError(err.response.data.message || `Error: ${err.response.status}`);\r\n                    }\r\n               } else if (err.request) {\r\n                    console.error(\"Error request:\", err.request);\r\n                    setError(\"Could not connect to server. Is it running on port 3001?\");\r\n               } else {\r\n                    console.error('Error message:', err.message);\r\n                    setError(`An error occurred: ${err.message}`);\r\n               }\r\n            })\r\n            .finally(() => {\r\n                setLoading(false);\r\n            });\r\n}, []);\r\n\r\n// --- Filter Events based on Search and Club Selection ---\r\n    useEffect(() => {\r\n        let currentEvents = [...events];\r\n\r\n        if (searchTerm.trim()) {\r\n            currentEvents = currentEvents.filter(event =>\r\n                event.eid.toLowerCase().includes(searchTerm.toLowerCase())\r\n            );\r\n        }\r\n\r\n        if (selectedClub) {\r\n            currentEvents = currentEvents.filter(event =>\r\n                event.club_name === selectedClub\r\n            );\r\n        }\r\n\r\n        setFilteredEvents(currentEvents);\r\n    }, [searchTerm, selectedClub, events]);\r\n\r\n\r\n// --- Handle Event Registration ---\r\nconst handleRegister = (eventId, eventName) => {\r\n    if (!loggedInStudentIdentifier) {\r\n        alert('Could not identify student. Please ensure you are logged in.');\r\n        return;\r\n    }\r\n\r\n    const confirmation = window.confirm(`Are you sure you want to register for \"${eventName}\"?`);\r\n    if (confirmation) {\r\n        setRegistrationStatus(prev => ({ ...prev, [eventId]: { loading: true } }));\r\n\r\n        axios.post(`http://localhost:3001/api/student/events/register/${eventId}`,\r\n            {},\r\n            { withCredentials: true }\r\n        )\r\n        .then(response => {\r\n            console.log('Registration successful/status:', response.data);\r\n            const message = response.data.message || 'Registration successful!';\r\n            const isAlreadyRegistered = response.data.alreadyRegistered || false;\r\n\r\n            setRegistrationStatus(prev => ({ ...prev, [eventId]: { success: true, message: message } }));\r\n\r\n            if (!isAlreadyRegistered) {\r\n                    setEvents(prevEvents => prevEvents.map(event => {\r\n                    if (event._id === eventId) {\r\n                        const currentRegStd = Array.isArray(event.reg_std) ? event.reg_std : [];\r\n                        const updatedRegStd = currentRegStd.includes(loggedInStudentIdentifier)\r\n                            ? currentRegStd\r\n                            : [...currentRegStd, loggedInStudentIdentifier];\r\n                        return { ...event, reg_std: updatedRegStd };\r\n                    }\r\n                    return event;\r\n                    }));\r\n                 // If registration was successful, update the registeredEvents list if the modal is open\r\n                 if(showRegisteredEvents) {\r\n                     // A simple approach is to refetch the registered events\r\n                     // A more complex approach would be to add the event to the registeredEvents state\r\n                     fetchRegisteredEvents();\r\n                 }\r\n            }\r\n\r\n                 setTimeout(() => {\r\n                 setRegistrationStatus(prev => ({...prev, [eventId]: undefined}));\r\n                 }, 5000);\r\n        })\r\n        .catch(err => {\r\n            console.error(\"Error registering for event:\", err);\r\n            let errorMessage = 'Registration failed. Please try again.';\r\n                 if (err.response?.status === 401) {\r\n                     errorMessage = \"Authentication failed during registration. Please log in again.\";\r\n                 } else {\r\n                     errorMessage = err.response?.data?.message || errorMessage;\r\n                 }\r\n            setRegistrationStatus(prev => ({ ...prev, [eventId]: { error: true, message: errorMessage } }));\r\n                 setTimeout(() => {\r\n                 setRegistrationStatus(prev => ({...prev, [eventId]: undefined}));\r\n                 }, 7000);\r\n        });\r\n    }\r\n};\r\n\r\n// --- Fetch Registered Events ---\r\nconst fetchRegisteredEvents = async () => {\r\n    if (!loggedInStudentIdentifier) {\r\n        setRegisteredError(\"You must be logged in to view registered events.\");\r\n        return;\r\n    }\r\n\r\n    setLoadingRegistered(true);\r\n    setRegisteredError(null);\r\n\r\n    try {\r\n        const response = await axios.get('http://localhost:3001/api/student/events/registered', { withCredentials: true });\r\n        setRegisteredEvents(response.data);\r\n        console.log(\"Fetched registered events:\", response.data);\r\n    } catch (err) {\r\n        console.error(\"Error fetching registered events:\", err);\r\n        let errorMessage = 'Failed to fetch registered events.';\r\n        if (err.response?.status === 401) {\r\n            errorMessage = \"Authentication failed. Please log in again to view registered events.\";\r\n        } else {\r\n            errorMessage = err.response?.data?.message || errorMessage;\r\n        }\r\n        setRegisteredError(errorMessage);\r\n    } finally {\r\n        setLoadingRegistered(false);\r\n    }\r\n};\r\n\r\n// --- Handle View Registered Button Click ---\r\nconst handleViewRegisteredClick = () => {\r\n    // Only fetch if the modal is closed and we are about to open it\r\n    if (!showRegisteredEvents) {\r\n        fetchRegisteredEvents();\r\n    }\r\n    setShowRegisteredEvents(true); // Toggle modal visibility\r\n};\r\n\r\n// --- Helper formatDateTime (remains the same) ---\r\n    const formatDateTime = (dateString, timeSlots) => {\r\n    const date = new Date(dateString);\r\n    const formattedDate = date.toLocaleDateString('en-US', {\r\n        year: 'numeric', month: 'long', day: 'numeric', weekday: 'long'\r\n    });\r\n    const formattedTime = timeSlots?.join(' / ') || 'Time TBD';\r\n    return `${formattedDate} at ${formattedTime}`;\r\n    };\r\n\r\n// --- JSX Rendering ---\r\nreturn (\r\n    <div className={styles.upcomingEventsContainer}>\r\n        <h1><FaCalendarAlt /> Upcoming Approved Events</h1>\r\n\r\n        {/* --- Search, Filter, and View Registered Controls --- */}\r\n            <div className={styles.controls}>\r\n                <div className={styles.searchInputContainer}>\r\n                    <FaSearch className={styles.searchIcon} />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search by Event ID...\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                        className={styles.searchInput}\r\n                    />\r\n                </div>\r\n                <div className={styles.filterDropdownContainer}>\r\n                     <FaFilter className={styles.filterIcon} />\r\n                    <select\r\n                        value={selectedClub}\r\n                        onChange={(e) => setSelectedClub(e.target.value)}\r\n                        className={styles.filterDropdown}\r\n                    >\r\n                        <option value=\"\">All Clubs</option>\r\n                        {allClubs.map(club => (\r\n                            <option key={club} value={club}>{club}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n                {/* --- View Registered Events Button --- */}\r\n                {loggedInStudentIdentifier && ( // Only show button if logged in\r\n                    <button\r\n                        className={styles.viewRegisteredButton}\r\n                        onClick={handleViewRegisteredClick}\r\n                        disabled={loadingRegistered} // Disable while fetching\r\n                    >\r\n                        {loadingRegistered ? <BeatLoader size={8} color=\"#fff\" /> : <><FaEye /> View Registered Events</>}\r\n                    </button>\r\n                )}\r\n                {/* --- End View Registered Events Button --- */}\r\n            </div>\r\n        {/* --- End Search, Filter, and View Registered Controls --- */}\r\n\r\n\r\n            {/* Loading State */}\r\n            {loading && <div className={styles.centeredMessage}><BeatLoader color=\"#4A90E2\" loading={loading} size={15} /><p>Loading events...</p></div>}\r\n\r\n            {/* Error State */}\r\n            {error && !loading && <div className={`${styles.centeredMessage} ${styles.errorMessage}`}><FaExclamationCircle size={24} /><p>{error}</p></div>}\r\n\r\n            {/* No Events Found State */}\r\n            {!loading && !error && filteredEvents.length === 0 && (\r\n                 <div className={styles.centeredMessage}>\r\n                     <p>{events.length === 0 ? \"No upcoming events found.\" : \"No events match your current search/filter.\"}</p>\r\n                 </div>\r\n            )}\r\n\r\n\r\n            {/* Events Grid */}\r\n            {!loading && !error && filteredEvents.length > 0 && (\r\n                <div className={styles.eventsGrid}>\r\n                    {filteredEvents.map(event => {\r\n                        const isRegistered = loggedInStudentIdentifier && Array.isArray(event.reg_std) && event.reg_std.includes(loggedInStudentIdentifier);\r\n                        const regInfo = registrationStatus[event._id];\r\n\r\n                        return (\r\n                            <div key={event._id} className={styles.eventCard}>\r\n                                <h3>{event.event_name}</h3>\r\n                                <p className={styles.eventMeta}><FaUniversity /> <strong>Club:</strong> {event.club_name}</p>\r\n                                <p className={styles.eventMeta}><FaCalendarAlt /> <strong>Date & Time:</strong> {formatDateTime(event.event_date, event.time_slots)}</p>\r\n                                <p className={styles.eventMeta}><FaMapMarkerAlt /> <strong>Location:</strong> Room {event.room_number}</p>\r\n                                <p className={styles.eventMeta}><FaInfoCircle /> <strong>EID:</strong> {event.eid}</p>\r\n                                <p className={styles.eventDetails}>{event.event_details?.substring(0, 100)}{event.event_details?.length > 100 ? '...' : ''}</p>\r\n\r\n\r\n                                {/* Registration Button Area */}\r\n                                {event.std_reg === 'Yes' && (\r\n                                    <div className={styles.registrationArea}>\r\n                                        <button\r\n                                            className={`${styles.registerButton} ${isRegistered ? styles.registered : ''} ${regInfo?.loading ? styles.loading : ''}`}\r\n                                            onClick={() => !isRegistered && !regInfo?.loading && loggedInStudentIdentifier && handleRegister(event._id, event.event_name)}\r\n                                            disabled={isRegistered || regInfo?.loading || !loggedInStudentIdentifier}\r\n                                            title={!loggedInStudentIdentifier ? \"Please log in to register\" : (isRegistered ? \"You are already registered\" : `Register for ${event.event_name}`)}\r\n                                        >\r\n                                            {regInfo?.loading ? <BeatLoader size={8} color=\"#fff\" /> : (isRegistered ? <> <FaUserCheck /> Registered </> : 'Register Now')}\r\n                                        </button>\r\n                                        {regInfo?.success && <span className={styles.regSuccess}>{regInfo.message}</span>}\r\n                                        {regInfo?.error && <span className={styles.regError}>{regInfo.message}</span>}\r\n                                        {!loggedInStudentIdentifier && <span className={styles.regMessage}>Log in to register.</span>}\r\n                                    </div>\r\n                                )}\r\n                                {event.std_reg !== 'Yes' && (\r\n                                    <p className={styles.noRegistration}>Registration not available</p>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            )}\r\n\r\n        {/* --- Registered Events Modal --- */}\r\n        {showRegisteredEvents && (\r\n            <div className={styles.modalOverlay} onClick={() => setShowRegisteredEvents(false)}>\r\n                <div className={styles.modalContent} onClick={(e) => e.stopPropagation()}> {/* Prevent clicks inside from closing modal */}\r\n                    <button className={styles.modalCloseButton} onClick={() => setShowRegisteredEvents(false)}>\r\n                        <FaTimes />\r\n                    </button>\r\n                    <h2><FaCalendarAlt /> Your Registered Events</h2>\r\n                    {loadingRegistered && <div className={styles.centeredMessage}><BeatLoader color=\"#4A90E2\" size={15} /><p>Loading registered events...</p></div>}\r\n                    {registeredError && <div className={`${styles.centeredMessage} ${styles.errorMessage}`}><FaExclamationCircle size={24} /><p>{registeredError}</p></div>}\r\n                    {!loadingRegistered && !registeredError && registeredEvents.length === 0 && (\r\n                        <div className={styles.centeredMessage}><p>You are not registered for any upcoming events.</p></div>\r\n                    )}\r\n                    {!loadingRegistered && !registeredError && registeredEvents.length > 0 && (\r\n                        <ul className={styles.registeredEventsList}>\r\n                            {registeredEvents.map(event => (\r\n                                <li key={event._id} className={styles.registeredEventItem}>\r\n                                    <strong>{event.event_name}</strong>\r\n                                    <p><FaUniversity /> {event.club_name}</p>\r\n                                    <p><FaCalendarAlt /> {formatDateTime(event.event_date, event.time_slots)}</p>\r\n                                    <p><FaMapMarkerAlt /> Room {event.room_number}</p>\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        )}\r\n        {/* --- End Registered Events Modal --- */}\r\n\r\n        </div>\r\n);\r\n}\r\n\r\nexport default UpcomingEvents;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}